# Bloom Filter

The bloom filter implementation is used when reading through a file of orders to ensure that duplicates are filtered out. We have a specially written constructor to determine the size of the bloom filter as a bit array. Three methods are used: hash, insert, search.

## constructor Explained
The bloom filters constructor initializes the bloom filter vector to a fixed size based on the order files size. The size is calculated using a formula that takes into account the desired false positive rate. All values in the bloom filter are initially set to 0.

### constructor Implementation
```{literalinclude} ../../src/bloom.cpp
:start-after: tag::constructor[]
:end-before: end::constructor[]
```

## hash Explained
This method generates a hash value by taking an orderâ€™s ID and size, converting them to double, and then using the modulus operation. This hash value is used as an index in the bloom filter.

### hash Implementation
```{literalinclude} ../../src/bloom.cpp
:start-after: tag::hash[]
:end-before: end::hash[]
```

## insert Explained
This methods inserts an order into the bloom filter by first checking if the order is not already in the database. It utilizes the upcoming search function. If the order is not in the database, it calculates the hash value for the order and sets the value at that index in the bloom filter to 1.

### insert Implementation
```{literalinclude} ../../src/bloom.cpp
:start-after: tag::insert[]
:end-before: end::insert[]
```

## search Explained
This method checks if an order is likely in the database by checking the bloom filter at the index generated by the hash function. If the value at that index is 1, it indicates that the order is likely in the database.

### search Implementation
```{literalinclude} ../../src/bloom.cpp
:start-after: tag::search[]
:end-before: end::search[]
```
